{
  "produces": [
    "application/json"
  ],
  "schemes": [
    "https"
  ],
  "swagger": "2.0",
  "info": {
    "description": "The purpose of this application is to provide an API\nthat returns event information for a device.",
    "title": "Codex API",
    "version": "0.1.1"
  },
  "host": "localhost",
  "basePath": "/api/v1",
  "paths": {
    "/device/{deviceID}/events": {
      "get": {
        "security": [
          {
            "bearer_token": []
          }
        ],
        "produces": [
          "application/json"
        ],
        "schemes": [
          "https"
        ],
        "tags": [
          "device"
        ],
        "summary": "Get all of the events related to a specific device id.",
        "operationId": "getEvents",
        "parameters": [
          {
            "type": "string",
            "x-go-name": "DeviceID",
            "description": "device id passed by caller",
            "name": "deviceID",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/EventResponse"
          },
          "404": {
            "$ref": "#/responses/ErrResponse"
          },
          "500": {
            "$ref": "#/responses/ErrResponse"
          }
        }
      }
    },
    "/device/{deviceID}/status": {
      "get": {
        "security": [
          {
            "bearer_token": []
          }
        ],
        "produces": [
          "application/json"
        ],
        "schemes": [
          "https"
        ],
        "tags": [
          "device"
        ],
        "summary": "Get the status information for a specified device.",
        "operationId": "getStatus",
        "parameters": [
          {
            "type": "string",
            "x-go-name": "DeviceID",
            "description": "device id passed by caller",
            "name": "deviceID",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/StatusResponse"
          },
          "404": {
            "$ref": "#/responses/ErrResponse"
          },
          "500": {
            "$ref": "#/responses/ErrResponse"
          }
        }
      }
    }
  },
  "definitions": {
    "Event": {
      "description": "Event is the extension of wrp message\nhttps://github.com/Comcast/wrp-c/wiki/Web-Routing-Protocol",
      "type": "object",
      "required": [
        "msg_type"
      ],
      "properties": {
        "accept": {
          "description": "Accept  The media type accepted in the response.",
          "type": "string",
          "x-go-name": "Accept"
        },
        "birth_date": {
          "description": "BirthDate the time codex received the message",
          "type": "integer",
          "format": "int64",
          "x-go-name": "BirthDate",
          "example": 1555639704
        },
        "content_type": {
          "description": "ContentType The media type of the payload.",
          "type": "string",
          "x-go-name": "ContentType",
          "example": "json"
        },
        "dest": {
          "description": "Destination The device_id name of the target device of the request or response.",
          "type": "string",
          "x-go-name": "Destination",
          "example": "event:device-status/mac:ffffffffdae4/online"
        },
        "headers": {
          "description": "Headers The headers associated with the payload.",
          "type": "array",
          "items": {
            "type": "string"
          },
          "x-go-name": "Headers"
        },
        "include_spans": {
          "description": "IncludeSpans (Deprecated) If the timing values should be included in the response.",
          "type": "boolean",
          "x-go-name": "IncludeSpans"
        },
        "metadata": {
          "description": "Metadata The map of name/value pairs used by consumers of WRP messages for filtering \u0026 other purposes.",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "x-go-name": "Metadata",
          "example": {
            "/boot-time": 1542834188,
            "/last-reconnect-reason": "spanish inquisition"
          }
        },
        "msg_type": {
          "$ref": "#/definitions/MessageType"
        },
        "partner_ids": {
          "description": "PartnerIDs The list of partner ids the message is meant to target.",
          "type": "array",
          "items": {
            "type": "string"
          },
          "x-go-name": "PartnerIDs",
          "example": [
            "hello",
            "world"
          ]
        },
        "path": {
          "description": "Path The path to which to apply the payload.",
          "type": "string",
          "x-go-name": "Path"
        },
        "payload": {
          "description": "Payload The string encoded of the ContentType",
          "type": "array",
          "items": {
            "type": "integer",
            "format": "uint8"
          },
          "x-go-name": "Payload",
          "example": "eyJpZCI6IjUiLCJ0cyI6IjIwMTktMDItMTJUMTE6MTA6MDIuNjE0MTkxNzM1WiIsImJ5dGVzLXNlbnQiOjAsIm1lc3NhZ2VzLXNlbnQiOjEsImJ5dGVzLXJlY2VpdmVkIjowLCJtZXNzYWdlcy1yZWNlaXZlZCI6MH0="
        },
        "rdr": {
          "description": "RequestDeliveryResponse The request delivery response is the delivery result of the previous (implied request)\nmessage with a matching transaction_uuid",
          "type": "integer",
          "format": "int64",
          "x-go-name": "RequestDeliveryResponse"
        },
        "service_name": {
          "description": "ServiceName The originating point of the request or response",
          "type": "string",
          "x-go-name": "ServiceName"
        },
        "source": {
          "description": "Source The device_id name of the device originating the request or response.",
          "type": "string",
          "x-go-name": "Source",
          "example": "dns:talaria.xmidt.example.com"
        },
        "spans": {
          "description": "Spans An array of arrays of timing values as a list in the format: \"parent\" (string), \"name\" (string),\n\"start time\" (int), \"duration\" (int), \"status\" (int)",
          "type": "array",
          "items": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "x-go-name": "Spans"
        },
        "status": {
          "description": "Status The response status from the originating service.",
          "type": "integer",
          "format": "int64",
          "x-go-name": "Status"
        },
        "transaction_uuid": {
          "description": "TransactionUUID The transaction key for the message",
          "type": "string",
          "x-go-name": "TransactionUUID",
          "example": "546514d4-9cb6-41c9-88ca-ccd4c130c525"
        },
        "url": {
          "description": "URL The url to use when connecting to the nanomsg pipeline",
          "type": "string",
          "x-go-name": "URL"
        }
      },
      "x-go-package": "github.com/Comcast/codex-gungnir"
    },
    "MessageType": {
      "description": "MessageType indicates the kind of WRP message",
      "type": "integer",
      "format": "int64",
      "x-go-package": "github.com/Comcast/codex-gungnir/vendor/github.com/Comcast/wrp-go/wrp"
    },
    "Status": {
      "description": "Status contains information on the current state of the device, how long it\nhas been like that, and the last reason for going offline",
      "type": "object",
      "required": [
        "deviceid",
        "state",
        "since",
        "now",
        "last_offline_reason",
        "partner_ids"
      ],
      "properties": {
        "deviceid": {
          "description": "the device id",
          "type": "string",
          "x-go-name": "DeviceID",
          "example": "5"
        },
        "last_offline_reason": {
          "description": "the last reason the device went offline.",
          "type": "string",
          "x-go-name": "LastOfflineReason",
          "example": "ping miss"
        },
        "now": {
          "description": "the current time",
          "type": "string",
          "format": "date-time",
          "x-go-name": "Now",
          "example": "2019-02-26T20:18:15.188881748Z"
        },
        "since": {
          "description": "The time the device state event was created by talaria",
          "type": "string",
          "format": "date-time",
          "x-go-name": "Since",
          "example": "2019-02-26T20:18:15.188881748Z"
        },
        "state": {
          "description": "State of the device. Ex: online, offline",
          "type": "string",
          "x-go-name": "State",
          "example": "online"
        },
        "partner_ids": {
          "description": "the partner ids used by the device. Determined from the same event that provides the state",
          "type": "array",
          "items": {
            "type": "string"
          },
          "x-go-name": "PartnerIDs",
          "example": ["example partner", ".*"]
        }
      },
      "x-go-package": "github.com/Comcast/codex-gungnir"
    },
    "StatusResponse": {
      "type": "object",
      "title": "StatusResponse is what is returned for a successful getStatus call.",
      "properties": {
        "Body": {
          "$ref": "#/definitions/Status"
        }
      },
      "x-go-package": "github.com/Comcast/codex-gungnir"
    }
  },
  "responses": {
    "ErrResponse": {
      "description": "ErrResponse is the information passed to the client on an error",
      "headers": {
        "code": {
          "type": "integer",
          "format": "int64",
          "description": "The http code of the response\n\nrequired: true"
        }
      }
    },
    "Event": {
      "description": "Event is the extension of wrp message\nhttps://github.com/Comcast/wrp-c/wiki/Web-Routing-Protocol",
      "schema": {
        "type": "object",
        "additionalProperties": {
          "type": "string"
        },
        "$ref": "#/definitions/MessageType"
      },
      "headers": {
        "accept": {
          "type": "string",
          "description": "Accept  The media type accepted in the response.\n\nrequired: false"
        },
        "birth_date": {
          "type": "integer",
          "format": "int64",
          "example": 1555639704,
          "description": "BirthDate the time codex received the message\n\nrequired: false"
        },
        "content_type": {
          "type": "string",
          "example": "json",
          "description": "ContentType The media type of the payload.\n\nrequired: false"
        },
        "dest": {
          "type": "string",
          "example": "event:device-status/mac:ffffffffdae4/online",
          "description": "Destination The device_id name of the target device of the request or response.\n\nrequired: false"
        },
        "headers": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Headers The headers associated with the payload.\n\nrequired: false"
        },
        "include_spans": {
          "type": "boolean",
          "description": "IncludeSpans (Deprecated) If the timing values should be included in the response.\n\nrequired: false"
        },
        "metadata": {
          "example": "{\"/boot-time\":1542834188,\"/last-reconnect-reason\":\"spanish inquisition\"}",
          "description": "Metadata The map of name/value pairs used by consumers of WRP messages for filtering \u0026 other purposes.\n\nrequired: false"
        },
        "msg_type": {
          "example": "4",
          "description": "Type The message type for the message\n\nrequired: true"
        },
        "partner_ids": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "example": [
            "hello",
            "world"
          ],
          "description": "PartnerIDs The list of partner ids the message is meant to target.\n\nrequired: false"
        },
        "path": {
          "type": "string",
          "description": "Path The path to which to apply the payload.\n\nrequired: false"
        },
        "payload": {
          "type": "array",
          "items": {
            "type": "integer",
            "format": "uint8"
          },
          "example": "eyJpZCI6IjUiLCJ0cyI6IjIwMTktMDItMTJUMTE6MTA6MDIuNjE0MTkxNzM1WiIsImJ5dGVzLXNlbnQiOjAsIm1lc3NhZ2VzLXNlbnQiOjEsImJ5dGVzLXJlY2VpdmVkIjowLCJtZXNzYWdlcy1yZWNlaXZlZCI6MH0=",
          "description": "Payload The string encoded of the ContentType\n\nrequired: false"
        },
        "rdr": {
          "type": "integer",
          "format": "int64",
          "description": "RequestDeliveryResponse The request delivery response is the delivery result of the previous (implied request)\nmessage with a matching transaction_uuid\n\nrequired: false"
        },
        "service_name": {
          "type": "string",
          "description": "ServiceName The originating point of the request or response\n\nrequired: false"
        },
        "source": {
          "type": "string",
          "example": "dns:talaria.xmidt.example.com",
          "description": "Source The device_id name of the device originating the request or response.\n\nrequired: false"
        },
        "spans": {
          "type": "array",
          "items": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "description": "Spans An array of arrays of timing values as a list in the format: \"parent\" (string), \"name\" (string),\n\"start time\" (int), \"duration\" (int), \"status\" (int)\n\nrequired: false"
        },
        "status": {
          "type": "integer",
          "format": "int64",
          "description": "Status The response status from the originating service.\n\nrequired: false"
        },
        "transaction_uuid": {
          "type": "string",
          "example": "546514d4-9cb6-41c9-88ca-ccd4c130c525",
          "description": "TransactionUUID The transaction key for the message\n\nrequired: false"
        },
        "url": {
          "type": "string",
          "description": "URL The url to use when connecting to the nanomsg pipeline\n\nrequired: false"
        }
      }
    },
    "EventResponse": {
      "description": "EventResponse is what is returned on a successful response",
      "schema": {
        "type": "array",
        "items": {
          "$ref": "#/definitions/Event"
        }
      }
    },
    "Message": {
      "description": "Message is the union of all WRP fields, made optional (except for Type).  This type is\nuseful for transcoding streams, since deserializing from non-msgpack formats like JSON\nhas some undesirable side effects.\n\nIMPORTANT: Anytime a new WRP field is added to any message, or a new message with new fields,\nthose new fields must be added to this struct for transcoding to work properly.  And of course:\nupdate the tests!\n\nFor server code that sends specific messages, use one of the other WRP structs in this package.\n\nFor server code that needs to read one format and emit another, use this struct as it allows\nclient code to transcode without knowledge of the exact type of message.",
      "schema": {
        "type": "object",
        "additionalProperties": {
          "type": "string"
        },
        "$ref": "#/definitions/MessageType"
      },
      "headers": {
        "accept": {
          "type": "string",
          "description": "Accept  The media type accepted in the response.\n\nrequired: false"
        },
        "content_type": {
          "type": "string",
          "example": "json",
          "description": "ContentType The media type of the payload.\n\nrequired: false"
        },
        "dest": {
          "type": "string",
          "example": "event:device-status/mac:ffffffffdae4/online",
          "description": "Destination The device_id name of the target device of the request or response.\n\nrequired: false"
        },
        "headers": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Headers The headers associated with the payload.\n\nrequired: false"
        },
        "include_spans": {
          "type": "boolean",
          "description": "IncludeSpans (Deprecated) If the timing values should be included in the response.\n\nrequired: false"
        },
        "metadata": {
          "example": "{\"/boot-time\":1542834188,\"/last-reconnect-reason\":\"spanish inquisition\"}",
          "description": "Metadata The map of name/value pairs used by consumers of WRP messages for filtering \u0026 other purposes.\n\nrequired: false"
        },
        "msg_type": {
          "example": "4",
          "description": "Type The message type for the message\n\nrequired: true"
        },
        "partner_ids": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "example": [
            "hello",
            "world"
          ],
          "description": "PartnerIDs The list of partner ids the message is meant to target.\n\nrequired: false"
        },
        "path": {
          "type": "string",
          "description": "Path The path to which to apply the payload.\n\nrequired: false"
        },
        "payload": {
          "type": "array",
          "items": {
            "type": "integer",
            "format": "uint8"
          },
          "example": "eyJpZCI6IjUiLCJ0cyI6IjIwMTktMDItMTJUMTE6MTA6MDIuNjE0MTkxNzM1WiIsImJ5dGVzLXNlbnQiOjAsIm1lc3NhZ2VzLXNlbnQiOjEsImJ5dGVzLXJlY2VpdmVkIjowLCJtZXNzYWdlcy1yZWNlaXZlZCI6MH0=",
          "description": "Payload The string encoded of the ContentType\n\nrequired: false"
        },
        "rdr": {
          "type": "integer",
          "format": "int64",
          "description": "RequestDeliveryResponse The request delivery response is the delivery result of the previous (implied request)\nmessage with a matching transaction_uuid\n\nrequired: false"
        },
        "service_name": {
          "type": "string",
          "description": "ServiceName The originating point of the request or response\n\nrequired: false"
        },
        "source": {
          "type": "string",
          "example": "dns:talaria.xmidt.example.com",
          "description": "Source The device_id name of the device originating the request or response.\n\nrequired: false"
        },
        "spans": {
          "type": "array",
          "items": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "description": "Spans An array of arrays of timing values as a list in the format: \"parent\" (string), \"name\" (string),\n\"start time\" (int), \"duration\" (int), \"status\" (int)\n\nrequired: false"
        },
        "status": {
          "type": "integer",
          "format": "int64",
          "description": "Status The response status from the originating service.\n\nrequired: false"
        },
        "transaction_uuid": {
          "type": "string",
          "example": "546514d4-9cb6-41c9-88ca-ccd4c130c525",
          "description": "TransactionUUID The transaction key for the message\n\nrequired: false"
        },
        "url": {
          "type": "string",
          "description": "URL The url to use when connecting to the nanomsg pipeline\n\nrequired: false"
        }
      }
    },
    "StatusResponse": {
      "description": "StatusResponse is what is returned for a successful getStatus call.",
      "schema": {
        "$ref": "#/definitions/Status"
      }
    }
  },
  "securityDefinitions": {
    "bearer_token": {
      "type": "http"
    }
  }
}